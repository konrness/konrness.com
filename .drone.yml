kind: pipeline
type: docker
name: konrness-com-build

workspace:
  path: /srv/jekyll

steps:
- name: jekyll-build
  image: jekyll/jekyll:2.5.3
  commands:
  - chmod -R 777 /srv/jekyll
  - jekyll build

- name: docker-build
  image: plugins/docker  
  when:
    branch: master
    event: push
  settings:
    username: 
      from_secret: docker_username
    password: 
      from_secret: docker_password
    repo: konrness/konrness.com
    auto_tag: true
    tags:
      - latest
      - '1.0'